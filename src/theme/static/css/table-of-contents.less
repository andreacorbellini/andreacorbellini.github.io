@toc-min-size: 20rem;
@toc-padding: 2rem;

@toc-bullet-border: 0.3em;
@toc-bullet-diameter: 0.8em;

@toc-link-height: 2em;
@toc-link-padding: 1em;

main#content {
  aside.article-toc {
    position: absolute;
    left: 100%;
    height: 100%;
    margin-left: @figure-overflow-width;
    font-size: 0.92rem;

    display: none;
    @media only screen and (min-width: calc(@screen-width-large + @toc-min-size)) {
      display: block;
      width: calc(50vw - @content-width-large / 2 - $margin-left - @toc-padding);
    }

    nav {
      position: sticky;
      top: 4rem;
      margin-left: @toc-padding;
      border-left: 0.2em solid @color-main-toc-divider;

      ol {
        margin: 0;
        padding: 0;

        li {
          padding-left: @toc-link-padding;
          line-height: 1em;
          list-style: none;

          a {
            display: inline-block;
            padding-top: (@toc-link-height - 1em) / 2;
            padding-bottom: $padding-top;

            .underline-on-hover;
            color: @color-main-toc-link;

            &.active {
              font-weight: bold;

              &::before {
                content: '';

                position: absolute;
                left: -@toc-link-padding / 2 - @toc-bullet-border;
                width: @toc-bullet-diameter;
                height: $width;
                margin-top: -@toc-bullet-border / 2;

                border-radius: 50%;
                border: @toc-bullet-border solid @color-main-background;
                background: @color-main-toc-bullet;
              }
            }
          }
        }
      }

      & > ol > li:first-child a {
        padding-top: 0 !important;
        a.active::before {
          margin-top: -@toc-bullet-border / 2 !important;
        }
      }

      & > ol > li:last-child a {
        padding-bottom: 0 !important;
        a.active::before {
          margin-top: -@toc-bullet-border / 2 !important;
        }
      }
    }
  }
}
